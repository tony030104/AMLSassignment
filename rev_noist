import os
import cv2

# PATH TO ALL IMAGES
basedir = 'C:/Users/user/PycharmProjects/Assignment/venv'
images_dir = os.path.join(basedir,'dataset')

# Create the face cascade
face_patterns = cv2.CascadeClassifier(os.path.join(basedir,'haarcascade_frontalface_default.xml'))

c = 1
count = 0

for img in os.listdir(images_dir):
    im = str(c)+'.png'

    # Read the image
    image = cv2.imread(os.path.join(images_dir,im))
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Detect faces in the image
    faces = face_patterns.detectMultiScale(
       gray,
       scaleFactor=1.009,
       minNeighbors=5,
      minSize=(100, 100),
    )
    if len(faces) != 0:
        print(im)
        count += 1
    for (x, y, w, h) in faces:
       cv2.rectangle(image, (x, y), (x+w, y+h), (0, 255, 0), 2)
    img_d = 'detected'+im
    if im == '1220.png':
        cv2.imwrite(os.path.join(basedir,img_d), image);
    print(c)
    c += 1

print(count)
